var Page=function(){function p(){v("init");d()}function d(){o.on("click",function(){s.next();return false});u.on("click",function(){s.prev();return false});n.on({swipeleft:function(t){if(e.data("opened")){return false}s.next();return false},swiperight:function(t){if(e.data("opened")){return false}s.prev();return false}});f.on("click",y);a.on("click",function(){var e=$(this),t=e.index(),n=function(){s.jump(t+1)};i!==t?w(n):w();return false});$(window).on("debouncedresize",function(){v("reinit")})}function v(e,t){var t=t===undefined?i:t,r=n.eq(t).children("div.content"),s=r.data("jsp");if(e==="init"&&s===undefined){}else if(e==="reinit"&&s!==undefined){s.reinitialise()}else if(e==="destroy"&&s!==undefined){s.destroy()}}function m(){a.removeClass("menu-toc-current").eq(i).addClass("menu-toc-current")}function g(e){if(i===0){o.show();u.hide()}else if(e){o.hide();u.show()}else{o.show();u.show()}}function y(){var t=e.data("opened");t?w():b()}function b(){o.hide();u.hide();e.addClass("slideRight").data("opened",true)}function w(t){g(i===r-1);e.removeClass("slideRight").data("opened",false);if(t){if(h){e.on(c,function(){$(this).off(c);t.call()})}else{t.call()}}}var e=$("#container"),t=$("#bb-bookblock"),n=t.children(),r=n.length,i=0,s=$("#bb-bookblock").bookblock({speed:800,perspective:2e3,shadowSides:.8,shadowFlip:.4,onEndFlip:function(e,t,n){i=t;m();g(n);v("init");v("destroy",e)}}),o=$("#bb-nav-next"),u=$("#bb-nav-prev").hide(),a=e.find("ul.menu-toc > li"),f=$("#tblcontents"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},c=l[Modernizr.prefixed("transition")],h=Modernizr.csstransitions;return{init:p}}()